<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Submission Form</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>

    <form id="movieSubmitForm" onsubmit="submitForm(event)">
        <div>
            <label for="name">Name of the movie:</label>
            <input id="name" required>
        </div>
        <div>
            <label for="author">Author:</label>
            <input id="author" required>
        </div>
        <div>
            <label for="resume">Resume:</label>
            <input id="resume" required>
        </div>
        <div>
            <label for="year">Year:</label>
            <input id="year" name="year" required>
        </div>
        <div>
            <label for="link_yt">Youtube link:</label>
            <input id="link_yt" required>
        </div>
        <div>
            <label for="image">Images:</label>
            <input id="image" required>
        </div>
        <div>
            <label for="genre">Genre:</label>
            <div>
                <input type="checkbox" id="genre_28" value="28" name="genre[]">
                <label for="genre_28">Action</label>
            </div>
            <div>
                <input type="checkbox" id="genre_12" value="12" name="genre[]">
                <label for="genre_12">Adventure</label>
            </div>
            <div>
                <input type="checkbox" id="genre_16" value="16" name="genre[]">
                <label for="genre_16">Animation</label>
            </div>
            <div>
                <input type="checkbox" id="genre_35" value="35" name="genre[]">
                <label for="genre_35">Comedy</label>
            </div>
            <div>
                <input type="checkbox" id="genre_80" value="80" name="genre[]">
                <label for="genre_80">Crime</label>
            </div>
            <div>
                <input type="checkbox" id="genre_99" value="99" name="genre[]">
                <label for="genre_99">Documentary</label>
            </div>
            <div>
                <input type="checkbox" id="genre_18" value="18" name="genre[]">
                <label for="genre_18">Drama</label>
            </div>
            <div>
                <input type="checkbox" id="genre_10751" value="10751" name="genre[]">
                <label for="genre_10751">Family</label>
            </div>
            <div>
                <input type="checkbox" id="genre_14" value="14" name="genre[]">
                <label for="genre_14">Fantasy</label>
            </div>
            <div>
                <input type="checkbox" id="genre_36" value="36" name="genre[]">
                <label for="genre_36">History</label>
            </div>
            <div>
                <input type="checkbox" id="genre_27" value="27" name="genre[]">
                <label for="genre_27">Horror</label>
            </div>
            <div>
                <input type="checkbox" id="genre_10402" value="10402" name="genre[]">
                <label for="genre_10402">Music</label>
            </div>
            <div>
                <input type="checkbox" id="genre_9648" value="9648" name="genre[]">
                <label for="genre_9648">Mystery</label>
            </div>
            <div>
                <input type="checkbox" id="genre_10749" value="10749" name="genre[]">
                <label for="genre_10749">Romance</label>
            </div>
            <div>
                <input type="checkbox" id="genre_878" value="878" name="genre[]">
                <label for="genre_878">Science Fiction</label>
            </div>
            <div>
                <input type="checkbox" id="genre_10770" value="10770" name="genre[]">
                <label for="genre_10770">TV Movie</label>
            </div>
            <div>
                <input type="checkbox" id="genre_53" value="53" name="genre[]">
                <label for="genre_53">Thriller</label>
            </div>
            <div>
                <input type="checkbox" id="genre_10752" value="10752" name="genre[]">
                <label for="genre_10752">War</label>
            </div>
            <div>
                <input type="checkbox" id="genre_37" value="37" name="genre[]">
                <label for="genre_37">Western</label>
            </div>
        </div>
        <div>
            <button type="submit">Register</button>
        </div>
    </form>

    <script>
        function submitForm(event) {
            event.preventDefault();

            var name = document.getElementById("name").value;
            var author = document.getElementById("author").value;
            var resume = document.getElementById("resume").value
            var year = document.getElementById("year").value;
            var link_yt = document.getElementById("link_yt").value;
            var image = document.getElementById("image").value;

            // Get selected genres as an array
            var genreCheckboxes = document.querySelectorAll('input[name="genre[]"]:checked');
            var genre = Array.from(genreCheckboxes).map(checkbox => checkbox.value);

            axios.post('http://localhost/movies/add.php', {
                name: name,
                author: author,
                resume: resume,
                year: year,
                link_yt: link_yt,
                image: image,
                genre: genre
            })
                .then(function (response) {
                    console.log(response.data);
                    alert("Register successful!");
                })
                .catch(function (error) {
                    console.error("Register failed:", error);
                });
        }
    </script>

</body>

</html>
